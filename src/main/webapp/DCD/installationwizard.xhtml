<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:b="http://bootsfaces.net/ui"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://xmlns.jcp.org/jsf/core">

    <h:head>

        <meta content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" name="viewport"></meta>
        <h:outputScript name="charts/charts.js" library="primefaces" />

        <link href="../resources/bootstrap.min.css" rel="stylesheet" type="text/css"/>
        <link href="../resources/css/font-awesome.min.css" rel="stylesheet" type="text/css"/>
        <script src="../resources/scripts/bootstrap.min.js" type="text/javascript"></script>

        <link rel="stylesheet" href="../resources/bower_components/bootstrap/dist/css/bootstrap.min.css"></link>
        <link rel="stylesheet" href="../resources/bower_components/font-awesome/css/font-awesome.min.css"></link>
        <link rel="stylesheet" href="../resources/bower_components/Ionicons/css/ionicons.min.css"></link>

        <link href="../resources/bower_components/dist/css/AdminLTE.min.css" rel="stylesheet" type="text/css"/>

        <link href="resources/css/font-awesome.min.css" rel="stylesheet" type="text/css"/>
        <link href="../resources/bower_components/dist/css/skins/_all-skins.min.css" rel="stylesheet" type="text/css"/>
        <script name="jquery/jquery.js" library="primefaces" type="text/javascript"></script>
        <title>Installation</title>
    </h:head>
    <h:body>
        <div class="container-fluid">
            <div class="content">
                <div class="container-fluid bg-primary" >
                    <section class="content-header">
                        <ul class="nav navbar-nav navbar-right">
                            <b:form>

                                <p:commandLink action="#{loginbean.logout()}" styleClass="ui-button-flat p-ml-2" >
                                    <i class="fa fa-power-off" style="color: white;font-size:3rem;margin-right: 32px;margin-top: 10px"></i>
                                </p:commandLink>

                            </b:form>
                        </ul>
                        <h1>
                            <b> INSTALLATION</b>
                        </h1>
                        <p></p>
                        <large><b>WELCOME</b> #{loginbean.fullname}</large>

                        <p:separator></p:separator>
                    </section>

                </div>
                <p></p>
                <b:container id="maincontainer" fluid="true">

                    <h:form id="wizardform">
                        <p:growl id="growl" sticky="true" showDetail="true" showSummary="true" widgetVar="growlWV" >
                            <p:autoUpdate disabled="false"/>
                        </p:growl>
                        <f:metadata>
                        </f:metadata>
                        <p:wizard flowListener="#{installationController.onFlowProcess}" widgetVar="wiz" backLabel="prev">
                            <p:tab title="REQUEST DETAILS" id="reqWizard" titleStyleClass="firstTab">
                                <p></p>
                                <div class="row">
                                    <div class="col-md-12">
                                        <center>
                                            <p:panelGrid style="background: transparent;border-color: transparent" columns="3" >
                                                <b:inputText id="itUtilityNumber" value="#{installationController.utilityNumber}" placeholder="e.g UN-10123456789"  style="width: 220px"/>
                                                <b:commandButton id="btnLookup" look="warning" styleClass="ui-button-flat p-ml-2" value="SEARCH" update="wizardform:pnlSurveyInitialDetails wizardform:pnlBOMDetails" style="width: 100px;font-size:1.5rem;"  >
                                                    <f:actionListener binding="#{installationController.updateSelected()}"/> 
                                                <f:actionListener binding="#{bomGatewaysController.updateGtwEstimation(installationController.selectedRequest.activeBom)}"/>
                                                    <f:actionListener binding="#{bomMetersController.fetchBomMetersWithMeterModel(installationController.selectedRequest.activeBom)}"/>
                                                </b:commandButton>
                                            </p:panelGrid>
                                        </center>
                                    </div>
                                </div>

                                <p></p>
                                <!-- Info boxes -->
                                <div class="row">
                                    <div class="col-md-12">

                                        <b:panel id="pnlSurveyInitialDetails" look="primary" >

                                            <p:panelGrid style="width: 100%">
                                                <p:row>
                                                    <p:column style="text-align: right">
                                                        <p:outputLabel value="Emirate:"/>
                                                    </p:column>
                                                    <p:column colspan="3">
                                                        <p:outputLabel id="otEmirate" value="#{installationController.selectedRequest.emirateName}"/>
                                                    </p:column>
                                                    <p:column style="text-align: right">
                                                        <p:outputLabel value="Premise Primary Contact:"/>
                                                    </p:column>
                                                    <p:column colspan="3">
                                                        <p:outputLabel id="otContactPrimary" value="#{installationController.selectedRequest.contactNumberPrimary}"/>
                                                    </p:column>
                                                    <p:column style="text-align: right">
                                                        <p:outputLabel value="Survey Permit Number:"/>
                                                    </p:column>
                                                    <p:column colspan="3">
                                                    <p:outputLabel id="itSurveyPermit" value=""/>
                                                    </p:column>
                                                </p:row>
                                                <p:row>
                                                    <p:column style="text-align: right">
                                                        <p:outputLabel value="Region:"/>
                                                    </p:column>
                                                    <p:column colspan="3">
                                                        <p:outputLabel id="otRegion" value="#{installationController.selectedRequest.emirateRegionName}"/>
                                                    </p:column>
                                                    <p:column style="text-align: right">
                                                        <p:outputLabel value="Additional Contact:"/>
                                                    </p:column>
                                                    <p:column colspan="3">
                                                        <p:outputLabel id="otContactAdditional" value="#{installationController.selectedRequest.contactNumberSecondary}"/>
                                                    </p:column> 
                                                    <p:column style="text-align: right">
                                                        <p:outputLabel value="Sub Station Number:"/>
                                                    </p:column>
                                                    <p:column colspan="3">
                                                        <p:outputLabel id="itSubstationNumber" value="#{installationController.selectedRequest.premiseSubStationNumber}"/>
                                                    </p:column>
                                                </p:row>
                                                <p:row>
                                                    <p:column style="text-align: right">
                                                        <p:outputLabel value="Premise / Building Name:"/>
                                                    </p:column>
                                                    <p:column colspan="3">
                                                        <p:outputLabel id="itBuildingName" value="#{installationController.selectedRequest.premiseBuildingName}" />
                                                    </p:column>
                                                    <p:column style="text-align: right">
                                                        <p:outputLabel value="Premise ID:"/>
                                                    </p:column>
                                                    <p:column colspan="3">
                                                        <p:outputLabel id="itPremiseID" value="#{installationController.selectedRequest.premiseId}" />
                                                    </p:column>
                                                    <p:column style="text-align: right">
                                                        <p:outputLabel value="Customer / Business:"/>
                                                    </p:column>
                                                    <p:column colspan="3">
                                                        <p:outputLabel id="somCustomer" value="#{installationController.selectedRequest.customerCompany}" />
                                                    </p:column>
                                                </p:row>
                                                <p:row>
                                                    <p:column style="text-align: right">
                                                        <p:outputLabel value="Plot Number:"/>
                                                    </p:column>
                                                    <p:column colspan="3">
                                                        <p:outputLabel id="itPlotNumber" value="#{installationController.selectedRequest.premisePlotNumber}" />
                                                    </p:column>
                                                    <p:column style="text-align: right">
                                                        <p:outputLabel value="Premise Type:"/>
                                                    </p:column>
                                                    <p:column colspan="3">
                                                        <p:outputLabel id="somPremiseType" value="#{installationController.selectedRequest.premiseType}" />
                                                    </p:column>
                                                    <p:column style="text-align: right">
                                                        <p:outputLabel value="Vendor:"/>
                                                    </p:column>
                                                    <p:column colspan="3">
                                                        <p:outputLabel id="otVendor" value="#{installationController.selectedRequest.venodrName}" />
                                                    </p:column>
                                                </p:row>
                                                <p:row>
                                                    <p:column style="text-align: right">
                                                        <p:outputLabel value="Location Coordinates:"/>
                                                    </p:column>
                                                    <p:column colspan="3">
                                                        <p:panelGrid columns="2">
                                                            <p:inplace editor="true" id="itLatitude" style="width: 100px" >
                                                                <p:ajax event="save" listener="#{ussurveyController.saveGPSInplace()}" update="itLatitude "/>
                                                                <p:inputText value="0.0" label="text"/>
                                                            </p:inplace>    
                                                            <p:inplace editor="true" id="itLongitude" style="width: 100px">
                                                                <p:ajax event="save" listener="#{ussurveyController.saveGPSInplace()}" update="itLongitude "/>
                                                                <p:inputText value="0.0" label="text"/>
                                                            </p:inplace>
                                                        </p:panelGrid>
                                                    </p:column>
                                                    <p:column style="text-align: right">
                                                        <p:outputLabel value="Address:"/>
                                                    </p:column>
                                                    <p:column colspan="5">
                                                        <b:inputTextarea readonly="true" id="itAddress" value="#{installationController.selectedRequest.premiseAddress}" rows="1" />
                                                    </p:column>
                                                </p:row>
                                            </p:panelGrid>
                                        </b:panel>
                                    </div>
                                </div>
                                <!-- /.row -->

                                <!-- Info boxes -->
                                <div class="row">
                                    <div class="col-md-12">
                                        <b:panel id="pnlBOMDetails" look="primary" >
                                            <p:panelGrid>
                                                <p:row>
                                                    <p:column style="text-align: right">
                                                        <p:outputLabel value="No Of Meters:"/>
                                                    </p:column>
                                                    <p:column colspan="3">
                                                        <p:outputLabel id="olMeters" value="#{bomMetersController.getTotalMeters()}"/>
                                                    </p:column>
                                                    <p:column style="text-align: right">
                                                        <p:outputLabel value="No Of Gateways:"/>
                                                    </p:column>
                                                    <p:column colspan="3">
                                                        <p:outputLabel id="olGateways" value="#{bomGatewaysController.estimation.size()}"/>
                                                    </p:column>
                                                    <p:column style="text-align: right">
                                                        <p:outputLabel value="BOM Id:"/>
                                                    </p:column>
                                                    <p:column colspan="3">
                                                        <p:outputLabel id="olBOMId" value="#{installationController.selectedRequest.activeBom}"/>
                                                    </p:column>
                                                    <p:column style="text-align: right">
                                                        <p:outputLabel value="BOM Status:"/>
                                                    </p:column>
                                                    <p:column colspan="3">
                                                        <p:outputLabel id="olBOMStatus" value="#{installationController.selectedRequest.requestStatus}"/>
                                                    </p:column>
                                                </p:row>
                                            </p:panelGrid>
                                        </b:panel>
                                    </div>
                                </div>
                                <!-- /.row -->

                            </p:tab>

                            <p:tab title="CONFIGURE" id="configureTab" titleStyleClass="middleTab">
                                <p></p>
                                <b:container fluid="true">                       
                                    <center>
                                        <b>Please enter the gateway serial number, SIM ICCID and press save button on the right side of the row</b>
                                    </center>
                                    <p></p>
                                    <p:panel header="Gateways" id="pnlGateways">
                                        <p:dataTable value="#{bomGatewaysController.estimation}"
                                                     var="gatewayItem" id="tblGateways"
                                                     rows="10" rowKey="#{gatewayItem.id}" rowExpandMode="single"
                                                     paginator="true" paginatorPosition="bottom" multiViewState="true"
                                                     rowsPerPageTemplate="#{bomGatewaysController.rowsPerPageTemplate}" rowIndexVar="index">
                                            <p:column headerText="Map With Meters">
                                                <p:rowToggler/>
                                            </p:column>
                                            <p:column headerText="Gateway Label" selectRow="false">
                                                <h:outputText value="#{gatewayItem.gatewaysChainLabel}" />
                                            </p:column>
                                            <p:column headerText="Gateway Type" selectRow="false">
                                                <h:outputText value="#{gatewayItem.gatewaysType} - #{gatewayItem.gatewaysVendor} - #{gatewayItem.gatewaysTypeProposed}" />
                                            </p:column>
                                            <p:column headerText="Serial Number" selectRow="false">
                                                <h:inputText id="itemSerialNumber" value="#{gatewayItem.serialNumber}" required="true" requiredMessage="Serial Number is Required" rendererType="gwItemSaveBtn" class="datatable-input-text"/>
                                                <h:inputHidden value="#{gatewayItem.serialNumber}" />
                                            </p:column>
                                            <p:column headerText="SIM ICCID" selectRow="false" style="width: 20%">
                                                <h:inputText id="itemSimICCID" value="#{gatewayItem.simDetailsDTO.simICCID}" converterMessage="SIM ICCID - please enter digits only!" validatorMessage="SIM ICCID - minimum allowable is 19 digits" class="datatable-input-text" immediate="true" required="true" requiredMessage="Sim ICCID is required">
                                                    <f:validateLength minimum = "19"/>
                                                </h:inputText>
                                                <h:inputHidden value="#{null==gatewayItem.simDetailsDTO||null==gatewayItem.simDetailsDTO.simICCID?'':gatewayItem.simDetailsDTO.simICCID}"/>
                                                <b:icon name="sim" class="fa fa-envelope-o" tooltip="Add Sim With HES" id="btnCreateSIMHES" style="cursor: pointer;" onclick="PF('createSimHESWdg#{gatewayItem.id}').show();changeEnvIcon(this);" update="itemSimICCID"/>
                                                <p:dialog id="createSimHESForm" widgetVar="createSimHESWdg#{gatewayItem.id}" header="Create SIM with HES" resizable="true" closeOnEscape="true" responsive="true" dynamic="true">
                                                    <p class="p-field">
                                                        <p:outputLabel value="SIM ICCID: " style="width: 50%">
                                                            <p:inputText value="#{gatewayItem.simDetailsDTO.simICCID}"/>
                                                        </p:outputLabel>
                                                        <p:outputLabel value="Channel Group: " style="width: 50%">
                                                            <p:inputText value="#{gatewayItem.simDetailsDTO.channelType}" />
                                                        </p:outputLabel>
                                                    </p>
                                                    <p class="p-field">
                                                        <p:outputLabel value="Communication Equipment Type: " style="width: 50%">
                                                            <p:inputText value="#{gatewayItem.simDetailsDTO.communicationEquipmentType}"/>
                                                        </p:outputLabel>
                                                        <p:outputLabel value="IP: " style="width: 50%">
                                                            <p:inputText value="#{gatewayItem.simDetailsDTO.ip}"/>
                                                        </p:outputLabel>
                                                    </p>
                                                    <p class="p-field">
                                                        <p:outputLabel value="Port: " style="width: 50%">
                                                            <p:inputText value="#{gatewayItem.simDetailsDTO.port}"/>
                                                        </p:outputLabel>
                                                        <p:outputLabel value="SIM Description: " style="width: 50%">
                                                            <p:inputText value="#{gatewayItem.simDetailsDTO.description}"/>
                                                        </p:outputLabel>
                                                    </p>
                                                    <p>
                                                         <p:commandButton class="btn btn-info" process="@this createSimHESForm" value="Add SIM" action="#{bomGatewaysController.addSIMWithHES(gatewayItem)}" title="Add SIM with HES"/>
                                                    </p>
                                                    <p:ajax event="close" listener="#{bomGatewaysController.handleSimDialogClose}"/>
                                                    <p:hotkey bind="esc" actionListener="#{bomGatewaysController.handleSimDialogClose}"/>
                                                </p:dialog>
                                            </p:column>
                                            <p:column headerText="Floor" selectRow="false" style="width: 5%">
                                                <h:outputText class="text-uppercase" value="#{gatewayItem.gatewayFloor}"/>
                                            </p:column>
                                            <p:column headerText="Room" selectRow="false" style="width: 5%">
                                                <h:outputText class="text-uppercase" value="#{gatewayItem.gatewayRoom}" />
                                            </p:column>
                                            <p:column headerText="Action" selectRow="false">
                                                <p:toolbar style="border:none;background: none;">
                                                    <p:toolbarGroup>
                                                        <p:commandButton id="gwItemSaveBtn" style="margin-left: 4.5em;" icon="fa fa-save" title="Add/Save Sim and Gateway Definition with HES" class="button-warning p-mr-2" 
                                                                         update="wizardform:tblGateways" process="@this wizardform:tblGateways:#{index}:itemSerialNumber wizardform:tblGateways:#{index}:itemSimICCID wizardform:tblGateways:#{index}:createSimHESForm" action="#{bomGatewaysController.saveGatewayEstimation(installationController.selectedRequest,gatewayItem)}"/>
                                                    </p:toolbarGroup>
                                                </p:toolbar>
                                            </p:column>
                                            <p:ajax event="rowToggle" listener="#{bomMetersController.fetchGatewayBomMeterModel(gatewayItem.id)}" 
                                                    process="@this tblGateways itemSerialNumber itemSimICCID" update="tblGateways"/>
                                            <p:rowExpansion id="meterRowExpansion" >
                                                <div class="card">
                                                    <h4 class="caption bg-navy-active">Associate Meters to #{gatewayItem.id} - #{gatewayItem.gatewaysChainLabel} - #{gatewayItem.gatewaysType} - #{gatewayItem.gatewaysVendor}</h4>
                                                    <p:pickList id="meterPickList"
                                                                value="#{bomMetersController.bomMeterModel}" 
                                                                var="meterItem"
                                                                itemValue="#{meterItem}" 
                                                                itemLabel="#{meterItem.bomMeterType} - #{meterItem.meterManufacturer} - #{meterItem.meterModel} - #{meterItem.meterFloor} - #{meterItem.meterRoom} - #{meterItem.meterSerial}"
                                                                converter="#{meterConverter}"
                                                                showSourceControls="true"
                                                                showTargetControls="true"
                                                                showSourceFilter="true"
                                                                showTargetFilter="true"
                                                                filterMatchMode="contains"
                                                                responsive="true"
                                                                styleClass="ui-picklist-list-source ui-picklist-list-target" >
                                                        <f:facet name="sourceCaption">Available</f:facet>
                                                        <f:facet name="targetCaption">Associated</f:facet>
                                                        <p:ajax event="transfer" listener="#{bomMetersController.onTransfer}" process="meterRowExpansion meterPickList"  update="meterPickList"/>
                                                    </p:pickList>
                                                    <p:commandButton title="associate meter with the gateway" value="Save" class="btn btn-success btn-primary center-block"
                                                                     action="#{bomMetersController.updateGtwBomMeterMapping(gatewayItem)}" process="@this wizardform:tblGateways:#{index}:meterPickList"/>
                                                    <p></p>
                                                </div>
                                            </p:rowExpansion>
                                        </p:dataTable>
                                    </p:panel>
                                </b:container>
                            </p:tab>
                            <p:tab title="SEMANTICS" id="semanticsTab" titleStyleClass="middleTab" >
                                <p></p>
                                <p:panel header="Semantic Diagram - Gateway and Meters" collapsed="false" 
                                         id="semanticsPanel">
                                    <p:tree id="tree"
                                            value="#{installationController.installationSemanticView.rootNode}"
                                            var="treeNode" draggable="true" orientation="horizontal" selectionMode="multiple"
                                            selection="#{installationController.installationSemanticView.selection}">
                                        <p:treeNode type="root" icon="fa fa-sitemap">
                                            <b:label value="#{treeNode.toString()}" tooltip="#{installationController.installationSemanticView.premiseType}"/>
                                        </p:treeNode>
                                        <p:treeNode type="#{installationController.installationSemanticView.premiseType}" class="#{installationController.installationSemanticView.premiseType}">
                                            <b:label value="#{treeNode}" tooltip="#{installationController.installationSemanticView.premiseType}"/>
                                        </p:treeNode>
                                        <p:treeNode type="floor" styleClass="floor">
                                            <b:label value="#{treeNode}" tooltip="#{installationController.installationSemanticView.getFloorNodeDetails(treeNode)}" />
                                            <p:diagram value="#{installationController.installationSemanticView.getFloorElements(treeNode)}" styleClass="diagram-panel">
                                            </p:diagram>
                                        </p:treeNode>
                                        </p:tree>
                                </p:panel>
                            </p:tab>
                            <p:tab title="ACCEPT" id="acceptTab" titleStyleClass="middleTab">

                                <p></p>
                                <b:panel title="BOM - Gateway - Meter Acceptance" collapsible="false" id="acceptPanel" look="primary">


                                    <br></br>
                                    <center>


                                    </center>
                                </b:panel>

                            </p:tab>
                            <p:tab title="CONFIRM" titleStyleClass="lastTab" titleStyle="padding-left: 90px" id="satis">
                                <p></p>
                                <h:form>
                                    <center>
                                        <img src="../resources/images/yes-sign.png" alt=""/>
                                        <p style="font-size: x-large;font-weight: bold">
                                            Thank You !
                                        </p>
                                        <p style="font-family: sans-serif">
                                            Your Service Reference number is <p style="font-weight: bold">#{mmsRequestController.selected.mmsRequest}</p>
                                        </p>
                                        <p style="font-family: sans-serif">
                                            Activation Flag Value is <p style="font-weight: bold">1</p>
                                        </p>
                                        <p:commandButton value="Close Request"   onsuccess="popup()" style="width: 200px;height: 50px;font-weight: bold" class="btn btn-success"/>

                                    </center>
                                </h:form>
                            </p:tab> 
                        </p:wizard>
                    </h:form>
                </b:container>


            </div>
        </div>



        <p:dialog widgetVar="statusDialog" modal="true" draggable="false" closable="false" resizable="false" showHeader="false" width="Auto">
            <center>
                Loading Request details, please wait !
                <img src="../resources/images/loading-bar.gif"/>
            </center>
        </p:dialog>
        <p:ajaxStatus onstart="viewAjaxStatusDialog();" oncomplete="hideAjaxStatusDialog();" />

    </h:body>
    <script>
        function viewAjaxStatusDialog() {
            if (!$(".ui-dialog-mask").length) {
                PF('statusDialog').show();
            }
        }
        function hideAjaxStatusDialog() {
            PF('statusDialog').hide();
        }

        function hideNextOnLastTab() {
//              if (PF('wiz').getStepIndex(PF('wiz').currentStep) === 2){
//                  PF('wiz').hideNextNav();
//              }
//              else{
//                  PF('wiz').showNextNav();
//              }
            PF('wiz').showBackNav();

        }
        function hideBackOnFirstTab() {
            if (PF('wiz').getStepIndex(PF('wiz').currentStep) === 1) {
                setTimeout(PF('wiz').hideBackNav(), 0);
            }
        }
        function popup() {
            alert("Request closed");
        }
        function updateOnlineStatus()
        {
            var str = "Online";
            document.getElementById("status").innerHTML = "You're back " + str.fontcolor("green");
            document.getElementById("status").style.borderColor = "#ff9800";
            document.getElementById("status").style.backgroundColor = "#ffc599";
        }

        function updateOfflineStatus()
        {
            var str = "Offline";
            document.getElementById("status").innerHTML = "You're " + str.fontcolor("red");
            document.getElementById("status").style.borderColor = "#ff0000";
            document.getElementById("status").style.backgroundColor = "#ffd9dc";
        }
        function validateGatewayFields() {
            var obj = document.getElementById('wizardform:tblGateways'),inputField;
            if(obj.getElementsByTagName('input')!==null){
                inputField=obj.getElementsByTagName('input')[0];
                if(inputField.id.toString().indexOf('itemSerialNumber')!==-1){
                    if ('' === inputField.value) {
                        window.alert("Serial Number is Required");
                        let plusIconCSSNode = document.getElementsByClassName('ui-icon-circle-triangle-s');
                        if(plusIconCSSNode.item(0)!==null){
                            let classNames = plusIconCSSNode.item(0).className.toString();
                            classNames = classNames.replace('ui-icon-circle-triangle-s','ui-icon-circle-triangle-e');
                            plusIconCSSNode.item(0).className=classNames.toString();
                            plusIconCSSNode.item(0).style.backgroundPosition='0 -192px';
                        }
                        return false;
                    }
                }
                if(obj.getElementsByTagName('input').length>=2){
                    inputField = obj.getElementsByTagName('input')[1];
                    if (inputField.id.toString().indexOf('itemSimICCID')!==-1){
                        if(inputField.value === ''){
                            window.alert("Sim ICCID is required");
                            let plusIconCSSNode = document.getElementsByClassName('ui-icon-circle-triangle-s');
                            if(plusIconCSSNode.item(1)!==null){
                                let classNames = plusIconCSSNode.item(1).className.toString();
                                classNames = classNames.replace('ui-icon-circle-triangle-s','ui-icon-circle-triangle-e');
                                plusIconCSSNode.item(1).className=classNames.toString();
                                plusIconCSSNode.item(1).style.backgroundPosition='0 -192px';
                            }
                        }
                     }
                }
            }
            return true;
        }
        function changeEnvIcon(htmlElement){
            htmlElement.className="fa fa-envelope-open-o";
        }
        //window.addEventListener('online', updateOnlineStatus);
        //window.addEventListener('offline', updateOfflineStatus);
    </script>
    <style type="text/css">
        .ui-steps .ui-steps-item {
            width: 24%;
        }

        .footer {
            left: 0;
            bottom: 0;
            width: 100%;
            background-color: white;
            color: black;
            text-align: center;
        }
        #activeinst{
            font-weight: bold;
            border: dotted red 2px;
            width: available;
            height: available;
        }

        .ui-state-highlight {
            text-shadow: none !important;
        }

        .ui-steps.custom {
            margin-bottom: 30px;
        }

        .ui-steps.custom .ui-steps-item .ui-menuitem-link {
            height: 10px;
            padding: 0 1em;
        }

        .ui-steps.custom .ui-steps-item .ui-steps-number {
            background-color: #0081c2;
            color: #FFFFFF;
            display: inline-block;
            width: 30px;
            border-radius: 10px;
            margin-top: -10px;
            margin-bottom: 10px;
        }

        .ui-steps.custom .ui-steps-item.ui-state-highlight .ui-steps-title {
            color: #555;
        }
        .red{
            background-color:#ff0000;
            background-image:none;
        }
        .orange{
            background-color:orange;
            background-image:none;
        }
        .yellow{
            background-color:yellow;
            background-image:none;
        }
        .className td {
            text-align: right;
        }
        .txt {
            padding-left: 8px;
            font-size: 16px;
        }

        .txtwrap {
            word-wrap: break-word;
        }
        input.scroll-left{
            width: 30px;
        }

        .navbar-brand
        {
            margin: 0;
            padding: 0;

        }

        .ui-widget, .ui-widget .ui-widget {
            font-size: 95% !important;
        }

        .navbar-brand img
        {
            max-height: 100%;
        }

        cen {
            position: absolute;
            right: 50%;
            left: 50%;
            transform: translate(-50%,-50%);
        }
        #wrapper {
            width: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .ui-tabview {
            padding: .25em;
            text-align: center;
        }

        .firstTab{
            line-height: 43px;
            text-align:left;
            height:60px;
            width:240px;
            margin-left: 150px !important;
            -webkit-clip-path: polygon(0% 0%, 75% 0%, 100% 50%, 75% 100%, 0% 100%);
            clip-path: polygon(0% 0%, 75% 0%, 100% 50%, 75% 100%, 0% 100%);
        }

        .middleTab{
            line-height: 43px;
            text-align:center;
            margin-left: -40px !important;
            height:60px;
            width:240px;
            -webkit-clip-path: polygon(75% 0%, 100% 50%, 75% 100%, 0% 100%, 25% 50%, 0% 0%);
            clip-path: polygon(75% 0%, 100% 50%, 75% 100%, 0% 100%, 25% 50%, 0% 0%);
        }

        .lastTab{
            line-height: 43px;
            text-align: right;
            margin-left: -100px !important;
            height:60px;
            width:240px;
            -webkit-clip-path: polygon(25% 0%, 100% 1%, 100% 100%, 25% 100%, 55% 50%);
            clip-path: polygon(25% 0%, 100% 0%, 100% 100%, 25% 100%, 50% 50%);
        }
        button.ui-wizard-nav-back {
            display:  inline-block;
        }
        ui-wizard-nav-back {
            display: inline-block;
        }
        .ui-wizard-step-titles{
            margin: 0 auto;
            max-width: 1200px;
        }
        .ui-column-unselectable{
            width: auto;
            text-align: center;
        }
        /*table tbody tr.ui-datatable-even{
            background: none repeat scroll 0 0 beige;
            color: darkblue;
        }
        table tbody tr.ui-datatable-even td input{
            background-color: beige;
        }
        table tbody tr.ui-datatable-odd{
            background: none repeat scroll 0 0 cadetblue;
            color: beige;
        }
        table tbody tr.ui-datatable-odd td input{
            background-color: cadetblue;
        }*/

        table tbody tr td div.ui-icon-circle-triangle-e{
            background-position: 0 -192px;
        }
        table tbody tr td div.ui-icon-circle-triangle-s{
            background-position: -16px -192px;
        }
        div.ui-row-toggler{
            display: block;
            margin-right: auto;
            margin-left: auto;
        }
        .ui-widget .ui-tree{
            justify-content: flex-start;
            display: flex;
        }
/*        .ui-widget-content{
            border: none;
        }*/
        .ui-tree .ui-tree-horizontal{
            background-size: 100% 100%;
            background-repeat: no-repeat;
            bottom: 0;
            box-shadow: none;
            min-height: 105px;
            min-width: inherit;
        }

        .ui-tree .ui-treenode.root {
            background-image: url('/UtilitySync/faces/login.xhtml/faces/javax.faces.resource/images/1.1.Location.png');
            background-size: contain;
            background-repeat: no-repeat;
        }
        .ui-tree .ui-treenode.villa {
            background-image: url('/UtilitySync/faces/login.xhtml/faces/javax.faces.resource/images/2.1.Villa.png');
            background-size: contain;
            background-repeat: no-repeat;
            line-height: 0.85;
        }
        .ui-tree .ui-treenode.building {
            background-image: url('/UtilitySync/faces/login.xhtml/faces/javax.faces.resource/images/2.5.LowRiseBuilding.png');
            background-size: contain;
            background-repeat: no-repeat;
            line-height: 0.85;
        }
        .ui-tree .ui-treenode.floor{
            /*background-image: url('/UtilitySync/faces/login.xhtml/faces/javax.faces.resource/images/greenmarker.png');*/
            background-size: contain;
            line-height: 0.85;
            min-height: 105px;
            background-repeat: no-repeat;
        }
        .ui-tree .ui-treenode.gateway {
            background-image: url('/UtilitySync/faces/login.xhtml/faces/javax.faces.resource/images/5.4.GW.png');
            background-size: contain;
            line-height: 0.85;
            background-repeat: no-repeat;
        }

        .ui-tree .ui-treenode.electric {
            background-image: url('../resources/images/5.2.ElectricMeter.png');
            background-size: contain;
            line-height: 0.85;
            background-repeat: no-repeat;
        }
        .ui-tree .ui-treenode.water {
            background-image: url('../resources/images/5.1.WaterMeter.png');
            background-size: contain;
            line-height: 0.85;
            background-repeat: no-repeat;
        }
        .ui-tree .target{
            justify-content: center;
        }
        .label-bottom-center{
            display:inline-block;
            margin-top: 72.5%;
            margin-bottom: 0%;
            background-color: white; 
        }
        .ui-icon.ui-icon-minus{
            margin-top: -9px;
        }
        .datatable-input-text{
            margin-right: 1em;
        }
        .diagram-gateway-box {
            border:1px solid #aaa;
            width:80px;
            height:30px;
            padding:10px;
            color: black;
            text-align: center;
            background-image: url('/UtilitySync/faces/login.xhtml/faces/javax.faces.resource/images/5.4.GW.png');
            background-size: contain;
            background-repeat: no-repeat;
            line-height: 4.5em;
        }
        .diagram-meter-water-box {
/*            border:1px solid #aaa;*/
            width:80px;
            height:30px;
            padding:10px;
            color: black;
            text-align: center;
            background-image: url('../resources/images/5.1.WaterMeter.png');
            background-size: contain;
            background-repeat: no-repeat;
            line-height: 4.5em;
        }
        .diagram-meter-electric-box {
/*            border:1px solid #aaa;*/
            width:80px;
            height:30px;
            padding:10px;
            text-align: center;
            color: black;
            background-image: url('../resources/images/5.2.ElectricMeter.png');
            background-size: contain;
            background-repeat: no-repeat;
            line-height: 4.5em;
        }
        .diagram-panel{
            margin: 0 auto;
            height:240px;
            width:420%;
            border:1px;
/*            background-color: cadetblue;*/
        }
        .floor-grid-blue-bg{
            background-color: cadetblue;
        }
        .ui-diagram-element{
            position: inherit;
        }
        .ui-picklist .ui-picklist-filter-container .ui-icon{
            top: 1px;
        }
        .ui-picklist-filter{
            height: 20px;
        }
    </style>
</html>