<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:b="http://bootsfaces.net/ui"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://xmlns.jcp.org/jsf/core">
    

    <h:head>
        
        <meta content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" name="viewport"></meta>
        <h:outputScript name="charts/charts.js" library="primefaces" />
        
        <link href="../resources/bootstrap.min.css" rel="stylesheet" type="text/css"/>
        <link href="../resources/css/font-awesome.min.css" rel="stylesheet" type="text/css"/>
        <script src="../resources/scripts/bootstrap.min.js" type="text/javascript"></script>
        
        <link rel="stylesheet" href="../resources/bower_components/bootstrap/dist/css/bootstrap.min.css"></link>
        <link rel="stylesheet" href="../resources/bower_components/font-awesome/css/font-awesome.min.css"></link>
        <link rel="stylesheet" href="../resources/bower_components/Ionicons/css/ionicons.min.css"></link>
        
        <link href="../resources/bower_components/dist/css/AdminLTE.min.css" rel="stylesheet" type="text/css"/>
        
        <link href="resources/css/font-awesome.min.css" rel="stylesheet" type="text/css"/>
        <link href="../resources/bower_components/dist/css/skins/_all-skins.min.css" rel="stylesheet" type="text/css"/>
        
        <title>Pre-Configuration</title>
    </h:head>
    <h:body>
        <div class="container-fluid">
            <div class="content">
                    <div class="container-fluid bg-primary" >
                        <section class="content-header">
                            <ul class="nav navbar-nav navbar-right">
                                <b:form>

                                    <p:commandLink action="#{loginbean.logout()}" styleClass="ui-button-flat p-ml-2" >
                                        <i class="fa fa-power-off" style="color: white;font-size:3rem;margin-right: 32px;margin-top: 10px"></i>
                                    </p:commandLink>

                                </b:form>
                            </ul>
                            <h1>
                                <b> PRE - CONFIGURATION</b>
                            </h1>
                            <br/>
                            <large><b>WELCOME</b> #{loginbean.fullname}</large>
                            
                            <p:separator></p:separator>
                        </section>
                        
                    </div>
                    <br/>
                    <b:container id="maincontainer" fluid="true">

                        <h:form id="wizardform">
                            <p:growl id="growl" sticky="true" showDetail="true" showSummary="true" widgetVar="growlWV" autoUpdate="true"/>
                            <f:metadata>

                            </f:metadata>

                                <p:wizard flowListener="#{preconfigurationViewController.onFlowProcess}" onnext="hideBackOnLastTab()" widgetVar="wiz">
                                    
                                    <p:tab title="REQUEST DETAILS" id="wizard" titleStyleClass="firstTab">
                                    <br/>
                                    <div class="row">
                                            <div class="col-md-12">
                                                <center>
                                                    <p:panelGrid style="background: transparent;border-color: transparent" columns="3" >
                                                        <b:inputText id="itUtilityNumber" value="#{preconfigurationViewController.utilityNumber}" placeholder="e.g UN-10123456789"  style="width: 220px"/>
                                                        <b:commandButton id="btnLookup" look="warning"   styleClass="ui-button-flat p-ml-2" value="SEARCH" update="wizardform:pnlSurveyInitialDetails wizardform:pnlBOMDetails"  style="width: 100px;font-size:1.5rem;"  >
                                                            
                                                            <f:actionListener binding="#{preconfigurationViewController.updateSelected()}"/> 
                                                            <f:actionListener binding="#{bomGatewaysController.updateEstimation(preconfigurationViewController.selectedRequest.activeBom)}"/>
                                                            <f:actionListener binding="#{bomMetersController.fetchBomMeters(preconfigurationViewController.selectedRequest.activeBom)}"/>
                                                        </b:commandButton>
                                                    </p:panelGrid>
                                                </center>
                                            </div>
                                    </div>

                                    <br/>
                                    <!-- Info boxes -->
                                    <div class="row">
                                        <div class="col-md-12">
                                            
                                        <b:panel id="pnlSurveyInitialDetails" look="primary" >
                                            
                                            <p:panelGrid>
                                                <p:row>
                                                    <p:column style="text-align: right">
                                                        <p:outputLabel    value="Emirate:"/>
                                                    </p:column>
                                                    <p:column colspan="3">
                                                        <p:outputLabel id="otEmirate" value="#{preconfigurationViewController.selectedRequest.emirateName}"/>
                                                    </p:column>
                                                    <p:column style="text-align: right">
                                                        <p:outputLabel    value="Premise Primary Contact:"/>
                                                    </p:column>
                                                    <p:column colspan="3">
                                                        <p:outputLabel id="otContactPrimary" value="#{preconfigurationViewController.selectedRequest.contactNumberPrimary}"/>
                                                    </p:column>
                                                    <p:column style="text-align: right">
                                                        <p:outputLabel   value="Survey Permit Number:"/>
                                                    </p:column>
                                                    <p:column colspan="3">
                                                        <p:outputLabel id="itSurveyPermit" value="#{preconfigurationViewController.selectedRequest.premiseType}"/>
                                                    </p:column>
                                                </p:row>
                                                <p:row>
                                                    <p:column style="text-align: right">
                                                        <p:outputLabel    value="Region:"/>
                                                    </p:column>
                                                    <p:column colspan="3">
                                                        <p:outputLabel id="otRegion" value="#{preconfigurationViewController.selectedRequest.emirateRegionName}"/>
                                                    </p:column>
                                                    <p:column style="text-align: right">
                                                        <p:outputLabel    value="Additional Contact:"/>
                                                    </p:column>
                                                    <p:column colspan="3">
                                                        <p:outputLabel id="otContactAdditional" value="#{preconfigurationViewController.selectedRequest.contactNumberSecondary}"/>
                                                    </p:column> 
                                                    <p:column style="text-align: right">
                                                        <p:outputLabel value="Sub Station Number:"/>
                                                    </p:column>
                                                    <p:column colspan="3">
                                                        <p:outputLabel id="itSubstationNumber" value="#{preconfigurationViewController.selectedRequest.premiseSubStationNumber}"/>
                                                    </p:column>
                                                </p:row>
                                                <p:row>
                                                    <p:column style="text-align: right">
                                                         <p:outputLabel  value="Premise / Building Name:"/>

                                                    </p:column>
                                                    <p:column colspan="3">
                                                        <p:outputLabel id="itBuildingName" value="#{preconfigurationViewController.selectedRequest.premiseBuildingName}" />


                                                    </p:column>
                                                    <p:column style="text-align: right">
                                                        <p:outputLabel   value="Premise ID:"/>

                                                    </p:column>
                                                    <p:column colspan="3">
                                                        <p:outputLabel id="itPremiseID" value="#{preconfigurationViewController.selectedRequest.premiseId}" />


                                                    </p:column>
                                                    <p:column style="text-align: right">
                                                        <p:outputLabel    value="Customer / Business:"/>

                                                    </p:column>
                                                    <p:column colspan="3">
                                                        <p:outputLabel id="somCustomer" value="#{preconfigurationViewController.selectedRequest.customerCompany}" />

                                                    </p:column>
                                                </p:row>
                                                <p:row>
                                                    <p:column style="text-align: right">
                                                        <p:outputLabel   value="Plot Number:"/>

                                                    </p:column>
                                                    <p:column colspan="3">
                                                        <p:outputLabel id="itPlotNumber" value="#{preconfigurationViewController.selectedRequest.premisePlotNumber}" />
                                                    </p:column>
                                                    <p:column style="text-align: right">
                                                        <p:outputLabel   value="Premise Type:"/>
                                                    </p:column>
                                                    <p:column colspan="3">
                                                        <p:outputLabel id="somPremiseType" value="#{preconfigurationViewController.selectedRequest.premiseType}" />
                                                    </p:column>
                                                    <p:column style="text-align: right">
                                                        <p:outputLabel   value="Vendor:"/>

                                                    </p:column>
                                                    <p:column colspan="3">
                                                        <p:outputLabel id="otVendor" value="#{preconfigurationViewController.selectedRequest.venodrName}" />

                                                    </p:column>
                                                </p:row>
                                                <p:row>
                                                    <p:column style="text-align: right">
                                                        <p:outputLabel   value="Location Coordinates:"/>
                                                    </p:column>
                                                    <p:column colspan="3">
                                                        <p:panelGrid columns="2">
                                                            <p:inplace  editor="true" id="itLatitude" style="width: 100px" >
                                                                <p:ajax event="save" listener="#{ussurveyController.saveGPSInplace()}" update="itLatitude "/>
                                                                <p:inputText value="0.0" label="text"/>
                                                            </p:inplace>    
                                                            <p:inplace  editor="true" id="itLongitude" style="width: 100px">
                                                                <p:ajax event="save" listener="#{ussurveyController.saveGPSInplace()}" update="itLongitude "/>
                                                                <p:inputText value="0.0" label="text"/>
                                                            </p:inplace>
                                                        </p:panelGrid>
                                                    </p:column>
                                                    <p:column style="text-align: right">
                                                        <p:outputLabel   value="Address:"/>
                                                    </p:column>
                                                    <p:column colspan="5">
                                                        <b:inputTextarea readonly="true" id="itAddress" value="#{preconfigurationViewController.selectedRequest.premiseAddress}" rows="1" />
                                                    </p:column>
                                                </p:row>


                                            </p:panelGrid>

                                        </b:panel>
                                    </div>
                                    </div>
                                    <!-- /.row -->

                                    <!-- Info boxes -->
                                    <div class="row">
                                        <div class="col-md-12">
                                            <b:panel id="pnlBOMDetails" look="primary" >
                                                <p:panelGrid>
                                                    <p:row>
                                                        <p:column style="text-align: right">
                                                            <p:outputLabel    value="No Of Meters:"/>
                                                        </p:column>
                                                        <p:column colspan="3">
                                                            <p:outputLabel id="olMeters" value="#{bomMetersController.getTotalMeters()}"/>
                                                        </p:column>
                                                        <p:column style="text-align: right">
                                                            <p:outputLabel    value="No Of Gateways:"/>
                                                        </p:column>
                                                        <p:column colspan="3">
                                                            <p:outputLabel id="olGateways" value="#{bomGatewaysController.estimation.size()}"/>
                                                        </p:column>
                                                        <p:column style="text-align: right">
                                                            <p:outputLabel   value="BOM Id:"/>
                                                        </p:column>
                                                        <p:column colspan="3">
                                                            <p:outputLabel id="olBOMId" value="#{preconfigurationViewController.selectedRequest.activeBom}"/>
                                                        </p:column>
                                                        <p:column style="text-align: right">
                                                            <p:outputLabel   value="BOM Status:"/>
                                                        </p:column>
                                                        <p:column colspan="3">
                                                            <p:outputLabel id="olBOMStatus" value="#{preconfigurationViewController.selectedRequest.requestStatus}"/>
                                                        </p:column>
                                                    </p:row>
                                                </p:panelGrid>
                                            </b:panel>
                                        </div>
                                    </div>
                                    <!-- /.row -->

                                </p:tab>

                                <p:tab title="LEARN" id="inv" titleStyleClass="middleTab">
                                    <br/>
                                    <b:container fluid="true">                       
                                        <center>
                                            <b>Please enter the gateway serial number and sim ICCID and press save button</b>
                                        </center>
                                        <br/>
                                        <b:panel  title="GATEWAYS" collapsible="false" id="pnlGateways" look="primary">
                                            <f:facet name="heading" class="panel">
                                                <b:row id="Actionbar">
                                                    <h:outputText value="Sim - Device Details" style="padding-left: 10px;font-weight: bold;font-size: 16px"/>
                                                    <p:commandButton  value="#{bundle.Save}" update="wizardform:Gateways"  class="btn pull-right" onclick="PF('statusDialogsave').show()" onsuccess="PF('statusDialogsave').hide()">

                                                    </p:commandButton>
                                                </b:row>
                                           </f:facet>
                                            <b:dataTable value="#{bomGatewaysController.estimation}"
                                                        var="item"
                                                        id="tblGateways"                                                 
                                                        save-state="true"
                                                        striped="true"
                                                        responsive="true"
                                                        paginated="false"
                                                        rowHighlight="true"
                                                        
                                                        >
                                               <b:dataTableColumn value="#{item.bomId} - #{item.id} - #{item.gatewaysChainLabel}" label="Gateway BOM ID" style="width: 100px"/>
                                               <b:dataTableColumn value="#{item.gatewaysVendor} - #{item.gatewaysType} - #{item.gatewaysTypeProposed}" label="Gateway Type" style="width: 200px"/>
                                               <b:dataTableColumn  data-type="text" style="width: 120px">
                                                   <f:facet name="header">
                                                       <h:outputText value="Serial Number"/>
                                                   </f:facet>
                                                   <h:inputText value="#{item.serialNumber}" required="true" requiredMessage="please fill all the below fields"/>
                                               </b:dataTableColumn>
                                               <b:dataTableColumn  data-type="text" style="width: 120px">
                                                   <f:facet name="header">
                                                       <h:outputText value="Sim ICCID"/>
                                                   </f:facet>
                                                   <h:inputText value="#{item.simICCID}" required="true" requiredMessage="please fill all the below fields"/>
                                               </b:dataTableColumn>
                                               <b:dataTableColumn label="Status" style="width: 100px">
                                                   <p:toolbar style="background: white;border:none ">
                                                       <p:toolbarGroup>
                                                               
                                                                <p:commandButton  type="button" title="Save" icon="fa fa-save" styleClass="button-warning p-mr-2" />
                                                                
                                                        </p:toolbarGroup>
                                                   </p:toolbar>
                                               </b:dataTableColumn>
                                               
                                           </b:dataTable>
                                        </b:panel>
                                    </b:container>    
                                </p:tab>

                                <p:tab title="LEARN II" id="inv2" titleStyleClass="middleTab">

                                    <br/>
                                    <b:panel  title="Aceesory(-ies)" collapsible="false" id="configsimpanel2" look="primary">


                                        <br></br>
                                        <center>


                                        </center>
                                    </b:panel>

                                </p:tab>

                                <p:tab title="CONFIRM" titleStyleClass="lastTab" titleStyle="padding-left: 90px" id="satis">
                                   <br/>
                                    <h:form>
                                        <center>
                                            <img src="../resources/images/yes-sign.png" alt=""/>
                                            <p style="font-size: x-large;font-weight: bold">
                                                Thank You !
                                            </p>
                                            <p style="font-family: sans-serif">
                                                Your Service Reference number is <p style="font-weight: bold">#{mmsRequestController.selected.mmsRequest}</p>
                                            </p>
                                            <p style="font-family: sans-serif">
                                                Activation Flag Value is <p style="font-weight: bold">1</p>
                                            </p>
                                            <p:commandButton value="Close Request"   onsuccess="popup()" style="width: 200px;height: 50px;font-weight: bold" class="btn btn-success"/>

                                        </center>
                                    </h:form>
                                </p:tab> 

                            </p:wizard>

                        </h:form>
                    </b:container>
                    
                
            </div>
        </div>
        
        

        <p:dialog widgetVar="statusDialog" modal="true" draggable="false" closable="false" resizable="false" showHeader="false" width="Auto">
            <center>
                Loading Request details, please wait !
                <img src="../resources/images/loading-bar.gif"/>
            </center>
        </p:dialog>
        <p:ajaxStatus onstart="viewAjaxStatusDialog();" oncomplete="hideAjaxStatusDialog();" />

    </h:body>
    <script>
        function viewAjaxStatusDialog() {
            if (!$(".ui-dialog-mask").length) {
                PF('statusDialog').show();
            }
        }
        function hideAjaxStatusDialog() {
            PF('statusDialog').hide();
        }

        function hideBackOnLastTab() {
            if (PF('wiz').getStepIndex(PF('wiz').currentStep) === 0) {
                PF('wiz').backNav.css("visibility", "hidden");
            }
        }
        function popup() {
            alert("Request closed");
        }
    </script>
    <script>
        function updateOnlineStatus()
        {
            var str = "Online";
            document.getElementById("status").innerHTML = "You're back " + str.fontcolor("green");
            document.getElementById("status").style.borderColor = "#ff9800";
            document.getElementById("status").style.backgroundColor = "#ffc599";
        }

        function updateOfflineStatus()
        {
            var str = "Offline";
            document.getElementById("status").innerHTML = "You're " + str.fontcolor("red");
            document.getElementById("status").style.borderColor = "#ff0000";
            document.getElementById("status").style.backgroundColor = "#ffd9dc";
        }

        window.addEventListener('online', updateOnlineStatus);
        window.addEventListener('offline', updateOfflineStatus);
    </script>
    <style type="text/css">
        .ui-steps .ui-steps-item {
            width: 24%;
        }
        
        .footer {
            left: 0;
            bottom: 0;
            width: 100%;
            background-color: white;
            color: black;
            text-align: center;
        }
        #activeinst{
            font-weight: bold;
            border: dotted red 2px;
            width: available;
            height: available;
        }

        .ui-state-highlight {
            text-shadow: none !important;
        }

        .ui-steps.custom {
            margin-bottom: 30px;
        }

        .ui-steps.custom .ui-steps-item .ui-menuitem-link {
            height: 10px;
            padding: 0 1em;
        }

        .ui-steps.custom .ui-steps-item .ui-steps-number {
            background-color: #0081c2;
            color: #FFFFFF;
            display: inline-block;
            width: 30px;
            border-radius: 10px;
            margin-top: -10px;
            margin-bottom: 10px;
        }

        .ui-steps.custom .ui-steps-item.ui-state-highlight .ui-steps-title {
            color: #555;
        }
        .red{
            background-color:#ff0000;
            background-image:none;
        }
        .orange{
            background-color:orange;
            background-image:none;
        }
        .yellow{
            background-color:yellow;
            background-image:none;
        }
        .className td {
            text-align: right;
        }
        .txt {
            padding-left: 8px;
            font-size: 16px;
        }

        .txtwrap {
            word-wrap: break-word;
        }

        .navbar-brand
        {
            margin: 0;
            padding: 0;

        }

        .ui-widget, .ui-widget .ui-widget {
            font-size: 90% !important;
        }

        .navbar-brand img
        {
            max-height: 100%;
        }

        cen {
            position: absolute;
            right: 50%;
            left: 50%;
            transform: translate(-50%,-50%);
        }
        #wrapper {
            width: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .ui-tabview {
            padding: .25em;
            text-align: center;
        }

        .firstTab{    
            line-height: 43px;
            text-align:left;  
            height:60px;
            width:240px;
            margin-left: 150px !important;
            -webkit-clip-path: polygon(0% 0%, 75% 0%, 100% 50%, 75% 100%, 0% 100%);
            clip-path: polygon(0% 0%, 75% 0%, 100% 50%, 75% 100%, 0% 100%);
        }

        .middleTab{    
            line-height: 43px;
            text-align:center;  
            margin-left: -40px !important;
            height:60px;
            width:240px;
            -webkit-clip-path: polygon(75% 0%, 100% 50%, 75% 100%, 0% 100%, 25% 50%, 0% 0%);
            clip-path: polygon(75% 0%, 100% 50%, 75% 100%, 0% 100%, 25% 50%, 0% 0%);
        }

        .lastTab{
            line-height: 43px;
            text-align: right;  
            margin-left: -100px !important;
            height:60px;
            width:240px;
            -webkit-clip-path: polygon(25% 0%, 100% 1%, 100% 100%, 25% 100%, 55% 50%);
            clip-path: polygon(25% 0%, 100% 0%, 100% 100%, 25% 100%, 50% 50%);
        }
        .button.ui-wizard-nav-back {
            display: none !important;
        }

        .ui-wizard-nav-back {
            display: none !important;
        }

        .ui-wizard-step-titles{
            margin: 0 auto;
            max-width: 1200px;
        }
        
           
       

        
    </style>
</html>